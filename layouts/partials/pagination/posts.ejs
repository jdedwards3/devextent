<% if (model.pagination.current.number == 1 && model.guid) { %>
<ul class="post-list featured <%= model.guid && model.pagination.current.number < 2 ? 'home' : '' %>">
  <% model.pagination.pageData.slice(0,1).forEach(function(post, index) { %>
  <li class="post-list-item">
    <!-- image -->
    <% if (post.image && model.guid && !model.pagination.first) { %>
    <img
      height="350"
      width="927"
      class="post-image post-index"
      alt="<%= post.imageAlt %>"
      src="/images/<%= post.image %>"
    />
    <% } %>
    <!-- end image -->
    <div
      class="post-list-item-content <%= model.guid && !post.image ? 'rounded' : '' %>"
    >
      <!-- title -->
      <% if (index < 1 ) { %>
      <!-- main index -->
      <% if (model.guid && !model.pagination.first) { %>
      <a href="/<%= post.slug %>/"><h1><%= post.title %></h1></a>
      <% } else { %>
      <a href="/<%= post.slug %>/"><h3><%= post.title %></h3></a>
      <% } %>
      <!-- end if guid -->
      <% } else { %>
      <a href="/<%= post.slug %>/"><h3><%= post.title %></h3></a>
      <% } %>

      <p class="post-meta">
        <% if (post.author && model.archives['author']) { %>
        <span>
          Author:
          <a
            href="/<%= model.archives['author'].find(item => item.name == post.author).slug %>/"
            ><%= post.author %></a
          >
        </span>
        <% } %>

        <span>
          <% if (post.createdDate == post.modifiedDate) { %>
          <span>Published: <%= new Date(post.createdDate).toLocaleDateString()%></span>
          <% } else { %>
          <span>Updated: <%= new Date(post.modifiedDate).toLocaleDateString() %></span>
          <% } %>
        </span>
      </p>

      <% if (post.metaDescription) { %>
      <p><%= post.metaDescription %></p>
      <% } %>

      <!-- post tags -->
      <% if (post.tags && model.archives['tags']) { %>
      <div class="tag-list-container">
        <span>Tags:</span>
        <ul class="tag-list">
          <% post.tags.forEach(function(tag) { %>
          <li>
            <a
              href="/<%= model.archives['tags'].find(item => item.name == tag).slug %>/"
              ><%= tag %></a
            >
          </li>
          <!-- end tags -->
          <% }); %>
        </ul>
      </div>
      <% } %>
    </div>
  </li>
  <% }); %>
</ul>

<h2 class="visually-hidden">Main Content</h2>

<ul class="post-list <%= model.guid && model.pagination.current.number < 2 ? 'home' : '' %>">
  <% model.pagination.pageData.slice(1).forEach(function(post, index) { %>
  <li class="post-list-item">
    <div
      class="post-list-item-content <%= model.guid && !post.image ? 'rounded' : '' %>"
    >
      <!-- title -->

      <a href="/<%= post.slug %>/"><h3><%= post.title %></h3></a>

      <p class="post-meta">
        <% if (post.author && model.archives['author']) { %>
        <span>
          Author:
          <a
            href="/<%= model.archives['author'].find(item => item.name == post.author).slug %>/"
            ><%= post.author %></a
          >
        </span>
        <% } %>

        <span>
          <% if (post.createdDate == post.modifiedDate) { %>
          <span>Published: <%= new Date(post.createdDate).toLocaleDateString()%></span>
          <% } else { %>
          <span>Updated: <%= new Date(post.modifiedDate).toLocaleDateString() %></span>
          <% } %>
        </span>
      </p>

      <% if (post.metaDescription) { %>
      <p><%= post.metaDescription %></p>
      <% } %>

      <!-- post tags -->
      <% if (post.tags && model.archives['tags']) { %>
      <div class="tag-list-container">
        <span>Tags:</span>
        <ul class="tag-list">
          <% post.tags.forEach(function(tag) { %>
          <li>
            <a
              href="/<%= model.archives['tags'].find(item => item.name == tag).slug %>/"
              ><%= tag %></a
            >
          </li>
          <!-- end tags -->
          <% }); %>
        </ul>
      </div>
      <% } %>
    </div>
  </li>
  <% }); %>
</ul>

<% } else { %>

  <ul class="post-list <%= model.guid && model.pagination.current.number < 2 ? 'home' : '' %>">
    <% model.pagination.pageData.forEach(function(post, index) { %>
     
    <li class="post-list-item">
      <% if (index < 1) { %>
      <!-- image -->
      <% if (post.image && model.guid && !model.pagination.first) { %>
      <img
        height="350"
        width="927"
        class="post-image post-index"
        alt="<%= post.imageAlt %>"
        src="/images/<%= post.image %>"
      />
      <% } %>
      <!-- end image -->
      <% } %>
      <div
        class="post-list-item-content <%= model.guid && !post.image ? 'rounded' : '' %>"
      >
        <!-- title -->
        <% if (index < 1 ) { %>
        <!-- main index -->
        <% if (model.guid && !model.pagination.first) { %>
        <h1><a href="/<%= post.slug %>/"><%= post.title %></a></h1>
        <% } else { %>
        <a href="/<%= post.slug %>/"><h3><%= post.title %></h3></a>
        <% } %>
        <!-- end if guid -->
        <% } else { %>
        <a href="/<%= post.slug %>/"><h3><%= post.title %></h3></a>
        <% } %>
  
        <p class="post-meta">
          <% if (post.author && model.archives['author']) { %>
          <span>
            Author:
            <a
              href="/<%= model.archives['author'].find(item => item.name == post.author).slug %>/"
              ><%= post.author %></a
            >
          </span>
          <% } %>
  
          <span>
            <% if (post.createdDate == post.modifiedDate) { %>
            <span>Published: <%= new Date(post.createdDate).toLocaleDateString()%></span>
            <% } else { %>
            <span>Updated: <%= new Date(post.modifiedDate).toLocaleDateString() %></span>
            <% } %>
          </span>
        </p>
  
        <% if (post.metaDescription) { %>
        <p><%= post.metaDescription %></p>
        <% } %>
  
        <!-- post tags -->
        <% if (post.tags && model.archives['tags']) { %>
        <div class="tag-list-container">
          <span>Tags:</span>
          <ul class="tag-list">
            <% post.tags.forEach(function(tag) { %>
            <li>
              <a
                href="/<%= model.archives['tags'].find(item => item.name == tag).slug %>/"
                ><%= tag %></a
              >
            </li>
            <!-- end tags -->
            <% }); %>
          </ul>
        </div>
        <% } %>
      </div>
    </li>
    <% }); %>
  </ul>
<% } %>

<% if (model.pagination.last || model.pagination.first) { %>
  <ul id="pagination-links">
    <% if (model.pagination.previous) { %>
    <li>
      <a class="newer" href="<%=`/${model.pagination.previous.slug}/` %>"
        >Newer
      </a>
    </li>
    <% } %>
    <!--  -->
    <% if (model.pagination.first) { %>
    <!--  -->
    <% if (!model.pagination.previous) { %>
    <li>
      <a class="newer" href="<%= `/${model.pagination.first.slug ? model.pagination.first.slug + "/": model.pagination.first.slug}` %>">Newer</a>
    </li>
    <% } %>
    <li>
      <a href="<%=`/${model.pagination.first.slug ? model.pagination.first.slug + "/" : model.pagination.first.slug}` %>"
        ><%= model.pagination.first.number %></a
      >
      <% if (model.pagination.previous && model.pagination.previous.number - model.pagination.first.number > 1){ %>
        ...
      <% } %>
    </li>
    <% } %>
    <!--  -->
    <% if (model.pagination.previous) { %>
    <li>
      <a href="<%=`/${model.pagination.previous.slug ? model.pagination.previous.slug + "/" : model.pagination.previous.slug}` %>"
        ><%= model.pagination.previous.number %>
      </a>
    </li>
    <% } %>
    <!--  -->
    <% if (model.pagination.current) { %>
    <li class="current">
      <a href="<%= `/${model.pagination.current.slug ? model.pagination.current.slug + "/" : model.pagination.current.slug}` %>">
        <%= model.pagination.current.number %></a
      >
    </li>
    <% } %>
    <!--  -->
    <% if (model.pagination.next) { %>
    <li>
      <a href="<%= `/${model.pagination.next.slug ? model.pagination.next.slug + "/" : model.pagination.next.slug}` %>">
        <%= model.pagination.next.number %></a
      >
    </li>
    <% } %>
    <!--  -->
    <% if (model.pagination.last) { %>
    <li>
      <% if (model.pagination.next && model.pagination.last.number - model.pagination.next.number > 1) { %>
        ...
      <% } %>
      <a href="<%= `/${model.pagination.last.slug ? model.pagination.last.slug + "/" : model.pagination.last.slug}` %>">
        <%= model.pagination.last.number %></a
      >
    </li>
    <% if (!model.pagination.next) { %>
    <li>
      <a class="older" href="<%= `/${model.pagination.last.slug ? model.pagination.last.slug + "/" : model.pagination.last.slug}` %>">Older</a>
    </li>
    <% } %>
    <!--  -->
    <% } %>
    <!--  -->
    <% if (model.pagination.next) { %>
    <li>
      <a class="older" href="<%= `/${model.pagination.next.slug ? model.pagination.next.slug + '/' : model.pagination.next.slug}` %>">Older</a>
    </li>
    <% } %>
    <!--  -->
  </ul>
<% } %>

